<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ottoman Power Routinen ‚Äì Niyazi Tuncay</title>

<style>
  :root{
    --bg:#000;
    --fg:#fff;
    --muted:#aaa;
    --line:#2a2a2a;
    --panel:#0c0c0c;
    --panel2:#101010;
    --accent:#00ff6a;
  }
  body{
    background:var(--bg);
    color:var(--fg);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    max-width: 980px;
    margin: 38px auto;
    padding: 0 16px;
  }
  h1{ margin:0; font-size: 30px; letter-spacing:-0.3px; }
  h2{ margin:6px 0 0 0; font-size: 18px; color:var(--muted); font-weight:600; }
  h3{ margin:0 0 10px 0; font-size: 16px; }
  .muted{ color:var(--muted); }
  .small{ font-size: 12px; color:var(--muted); }
  hr{ border:none; border-top:1px solid var(--line); margin: 22px 0; }

  .topbar{
    border:1px solid var(--line);
    border-radius: 14px;
    padding: 14px;
    background: var(--panel);
    display:flex;
    justify-content:space-between;
    align-items:flex-end;
    gap:12px;
    flex-wrap:wrap;
  }
  .buttons{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
  button{
    border:1px solid var(--line);
    background: var(--panel2);
    color: var(--fg);
    border-radius: 10px;
    padding: 8px 10px;
    cursor:pointer;
  }
  button:hover{ background:#151515; }
  .danger{ color:#ff5b5b; }

  .card{
    border:1px solid var(--line);
    border-radius: 14px;
    padding: 14px;
    background: var(--panel);
    margin-bottom: 14px;
  }

  table{ width:100%; border-collapse: collapse; }
  th, td{ border-bottom:1px solid var(--line); padding:8px; vertical-align:top; }
  th{ text-align:left; color: var(--muted); font-weight:600; }
  tr:last-child td{ border-bottom:none; }

  input, select{
    width: 100%;
    box-sizing:border-box;
    background: var(--panel2);
    color: var(--fg);
    border:1px solid var(--line);
    border-radius: 10px;
    padding: 7px 9px;
  }
  input[type="checkbox"]{ width:auto; }

  .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
  .kpiRow{ display:flex; gap:10px; flex-wrap:wrap; }
  .kpi{
    border:1px solid var(--line);
    background: var(--panel2);
    border-radius: 12px;
    padding: 10px 12px;
    min-width: 190px;
  }
  .kpi .num{ font-size: 20px; font-weight:800; color: var(--accent); }
  .kpi .lbl{ font-size: 12px; color: var(--muted); margin-top:4px; }

  .checklist{ display:grid; gap:8px; }
  .checkRow{ display:flex; gap:10px; align-items:flex-start; }
  .checkRow label{ line-height: 1.2; }

  .chartWrap{
    border:1px solid var(--line);
    border-radius: 14px;
    padding: 12px;
    background: var(--panel2);
  }
  canvas{ width:100%; height:260px; display:block; }

  /* multi-sport day UI */
  .dayBlock{
    border:1px solid var(--line);
    border-radius: 14px;
    padding: 12px;
    background: var(--panel2);
    margin-top: 10px;
  }
  .dayHeader{
    display:flex;
    justify-content:space-between;
    gap:10px;
    align-items:center;
    flex-wrap:wrap;
  }
  .dayTitle{ font-weight:700; }
  .sessions{ display:grid; gap:10px; margin-top:10px; }
  .session{
    border:1px solid var(--line);
    border-radius: 12px;
    padding: 10px;
    background: #0b0b0b;
  }
  .sessionGrid{
    display:grid;
    grid-template-columns: 1.2fr 0.6fr 0.6fr 0.6fr 0.6fr 1fr auto;
    gap:8px;
    align-items:start;
  }
  @media (max-width: 980px){
    .sessionGrid{ grid-template-columns: 1fr 1fr; }
  }
  .sessionActions{ display:flex; gap:8px; justify-content:flex-end; }
  .miniBtn{ padding: 7px 9px; border-radius: 10px; }
  .miniBtn.danger{ border-color:#3a1a1a; }
  .disabledLook{ opacity:0.35; }

  /* supplements day blocks */
  .suppDayBlock{ border:1px solid var(--line); border-radius:14px; padding:12px; background: var(--panel2); margin-top:10px; }
  .suppHeader{ display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap; }
  .suppList{ margin-top:10px; display:grid; gap:8px; }
</style>
</head>

<body>

<div class="topbar">
  <div>
    <h1>Niyazi Tuncay</h1>
    <h2>Ottoman Power Routinen</h2>
    <div class="small">Woche: <span id="weekLabel"></span> ¬∑ Speicherung lokal im Browser (pro Woche).</div>
  </div>
  <div class="buttons">
    <button id="prevWeek">‚óÄ Vorherige Woche</button>
    <button id="todayWeek">Diese Woche</button>
    <button id="nextWeek">N√§chste Woche ‚ñ∂</button>
    <button id="resetWeek" class="danger" title="Setzt nur die aktuelle Woche zur√ºck">Woche zur√ºcksetzen</button>
  </div>
</div>

<hr>

<div class="card">
  <div class="row" style="justify-content:space-between;">
    <div>
      <h3>üìä Wochenbilanz</h3>
      <div class="small">Summen dieser Woche (Sport, Lesen, Affirmationen, Supplements, Joggen).</div>
    </div>
    <button id="refreshAll">Bilanz aktualisieren</button>
  </div>
  <div class="kpiRow" id="weekKpis"></div>
</div>

<hr>

<div class="card">
  <h3>üíä Supplements ‚Äì t√§glich (Mo‚ÄìSo)</h3>
  <div class="small">Jeden Tag abhaken. (Du kannst die Liste sp√§ter erweitern.)</div>
  <div id="suppDays"></div>
</div>

<div class="card">
  <h3>üèãÔ∏è Sport ‚Äì mehrere Sessions pro Tag</h3>
  <div class="small">Joggen: Pace = <b>Minuten pro Kilometer</b> (Format <b>mm:ss</b> pro km, z.B. 5:30).</div>
  <div id="sportDays"></div>
</div>

<div class="card">
  <h3>üìö Buchlesen ‚Äì Wochenplan</h3>
  <div class="small">Pro Tag: Titel + Seiten + Minuten.</div>

  <table id="readTable" style="margin-top:10px;">
    <thead>
      <tr>
        <th style="width:120px;">Tag</th>
        <th>Titel</th>
        <th style="width:130px;">Seiten</th>
        <th style="width:130px;">Minuten</th>
      </tr>
    </thead>
    <tbody id="readBody"></tbody>
  </table>
</div>

<div class="card">
  <h3>üß† Affirmationen ‚Äì morgens & abends</h3>
  <div class="small">Hake ab, ob du deine Affirmationen gemacht hast.</div>

  <table id="affTable" style="margin-top:10px;">
    <thead>
      <tr>
        <th style="width:120px;">Tag</th>
        <th style="width:120px;">Morgens</th>
        <th style="width:120px;">Abends</th>
        <th>Notiz</th>
      </tr>
    </thead>
    <tbody id="affBody"></tbody>
  </table>
</div>

<div class="card">
  <h3>ü§∏ Stretching-Routine (Liste)</h3>
  <div class="small">Bilder kommen sp√§ter ‚Äì du schickst sie, dann baue ich sie ein.</div>
  <ul class="small" style="line-height:1.6; margin:10px 0 0 18px;">
    <li>Dynamisch diagonal zu den F√º√üen</li>
    <li>Lateral Spin</li>
    <li>Full Spine Stretch</li>
    <li>Nacken stretchen, kreisen, rechts/links</li>
    <li>Das Kind</li>
    <li>Cobra</li>
    <li>Katze und Hund</li>
    <li>Hero Pose</li>
    <li>Schneidersitz + Drehung</li>
    <li>Schneidersitz nach vorne zu den F√º√üen beugen</li>
    <li>Ausfallschritte H√ºftbeuger</li>
    <li>Bridge Pose</li>
    <li>Quad Stretch</li>
    <li>Spagat</li>
  </ul>
</div>

<script>
(() => {
  // ---------- constants ----------
  const DAYS = [
    {key:"mon", label:"Montag"},
    {key:"tue", label:"Dienstag"},
    {key:"wed", label:"Mittwoch"},
    {key:"thu", label:"Donnerstag"},
    {key:"fri", label:"Freitag"},
    {key:"sat", label:"Samstag"},
    {key:"sun", label:"Sonntag"},
  ];

  // Supplements list (daily)
  const SUPPLEMENTS = [
    { id:"d3k2", text:"Vitamin D3 / K2 (pro 10kg ‚Äì 1000 IE)" },
    { id:"omega3", text:"Omega 3 ‚Äì 4 Kapseln" },
    { id:"kurkuma", text:"Kurkuma + Piperin ‚Äì 4 Kapseln" },
    { id:"cellagon", text:"Cellagon Multivitamin ‚Äì 25 ml" },
    { id:"magnesium", text:"Magnesiumkapseln" },
    { id:"granatapfel", text:"Granatapfelsaft ‚Äì 300‚Äì400 ml" },
  ];

  const SPORTS = ["", "Krafttraining", "Joggen", "Stretching", "Ringen", "Schwimmen", "Tennis"];

  // ---------- helpers ----------
  const pad2 = n => String(n).padStart(2,"0");
  function startOfWeekMonday(date){
    const d = new Date(date);
    const day = d.getDay();
    const diff = (day === 0 ? -6 : 1 - day);
    d.setDate(d.getDate() + diff);
    d.setHours(0,0,0,0);
    return d;
  }
  function fmtDate(d){ return `${pad2(d.getDate())}.${pad2(d.getMonth()+1)}.${d.getFullYear()}`; }
  function weekKey(monday){
    return `${monday.getFullYear()}-${pad2(monday.getMonth()+1)}-${pad2(monday.getDate())}`;
  }
  function lsGet(key, fallback){
    try { const raw = localStorage.getItem(key); return raw ? JSON.parse(raw) : fallback; }
    catch { return fallback; }
  }
  function lsSet(key, value){ localStorage.setItem(key, JSON.stringify(value)); }

  // Pace mm:ss per km
  function parsePaceToSeconds(paceStr){
    if (!paceStr || !paceStr.includes(":")) return null;
    const [m,s] = paceStr.split(":").map(Number);
    if (!Number.isFinite(m) || !Number.isFinite(s)) return null;
    return m*60 + s;
  }
  function secondsToPace(sec){
    const m = Math.floor(sec/60);
    const s = Math.round(sec%60);
    return `${m}:${String(s).padStart(2,"0")}`;
  }

  // ---------- state ----------
  let currentMonday = startOfWeekMonday(new Date());
  const weekLabelEl = document.getElementById("weekLabel");

  function emptyWeek(){
    // daily supplements: per day -> items + note
    const supplements = Object.fromEntries(DAYS.map(d => [d.key, {
      note: "",
      items: Object.fromEntries(SUPPLEMENTS.map(s => [s.id, false]))
    }]));

    // sport sessions per day
    const sport = Object.fromEntries(DAYS.map(d => [d.key, { sessions: [] }]));

    const reading = Object.fromEntries(DAYS.map(d => [d.key, { title:"", pages:"", minutes:"" }]));
    const affirm  = Object.fromEntries(DAYS.map(d => [d.key, { morning:false, evening:false, note:"" }]));

    return { supplements, sport, reading, affirm };
  }

  function weekStorageKey(){
    return "op_week_v3_" + weekKey(currentMonday);
  }

  let weekData = lsGet(weekStorageKey(), emptyWeek());

  function saveWeek(){ lsSet(weekStorageKey(), weekData); }

  function renderWeekLabel(){
    const end = new Date(currentMonday);
    end.setDate(end.getDate()+6);
    weekLabelEl.textContent = `${fmtDate(currentMonday)} ‚Äì ${fmtDate(end)}`;
  }

  // ---------- supplements (daily blocks) ----------
  const suppDaysEl = document.getElementById("suppDays");

  function renderSupplementsDaily(){
    suppDaysEl.innerHTML = "";

    DAYS.forEach(d => {
      if (!weekData.supplements[d.key]) {
        weekData.supplements[d.key] = { note:"", items: Object.fromEntries(SUPPLEMENTS.map(s => [s.id, false])) };
      }

      const block = document.createElement("div");
      block.className = "suppDayBlock";

      const header = document.createElement("div");
      header.className = "suppHeader";
      header.innerHTML = `<div class="dayTitle">${d.label}</div>`;
      block.appendChild(header);

      const list = document.createElement("div");
      list.className = "suppList";

      SUPPLEMENTS.forEach(s => {
        const row = document.createElement("div");
        row.className = "checkRow";

        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.checked = !!weekData.supplements[d.key].items[s.id];
        cb.addEventListener("change", () => {
          weekData.supplements[d.key].items[s.id] = cb.checked;
          saveWeek();
          renderWeekKpis();
        });

        const label = document.createElement("label");
        label.textContent = s.text;

        row.appendChild(cb);
        row.appendChild(label);
        list.appendChild(row);
      });

      const note = document.createElement("input");
      note.placeholder = "Notiz (optional)";
      note.value = weekData.supplements[d.key].note || "";
      note.addEventListener("input", () => {
        weekData.supplements[d.key].note = note.value;
        saveWeek();
      });

      block.appendChild(list);
      block.appendChild(document.createElement("div")).style.height="8px";
      block.appendChild(note);

      suppDaysEl.appendChild(block);
    });

    saveWeek();
  }

  // ---------- sport (multi sessions) ----------
  const sportDaysEl = document.getElementById("sportDays");

  function newSession(){
    return { type:"", minutes:"", calories:"", km:"", pace:"", note:"" };
  }

  function renderSportMulti(){
    sportDaysEl.innerHTML = "";

    DAYS.forEach(d => {
      if (!weekData.sport[d.key] || !Array.isArray(weekData.sport[d.key].sessions)){
        weekData.sport[d.key] = { sessions: [] };
      }

      const block = document.createElement("div");
      block.className = "dayBlock";

      const header = document.createElement("div");
      header.className = "dayHeader";
      header.innerHTML = `<div class="dayTitle">${d.label}</div>`;

      const addBtn = document.createElement("button");
      addBtn.className = "miniBtn";
      addBtn.textContent = "+ Session hinzuf√ºgen";
      addBtn.addEventListener("click", () => {
        weekData.sport[d.key].sessions.push(newSession());
        saveWeek();
        renderSportMulti();
        renderWeekKpis();
      });

      header.appendChild(addBtn);
      block.appendChild(header);

      const sessionsWrap = document.createElement("div");
      sessionsWrap.className = "sessions";

      const sessions = weekData.sport[d.key].sessions;

      if (sessions.length === 0){
        const empty = document.createElement("div");
        empty.className = "small muted";
        empty.textContent = "Keine Sport-Session eingetragen.";
        empty.style.marginTop = "8px";
        block.appendChild(empty);
      } else {
        sessions.forEach((sess, idx) => {
          const card = document.createElement("div");
          card.className = "session";

          const grid = document.createElement("div");
          grid.className = "sessionGrid";

          const sel = document.createElement("select");
          SPORTS.forEach(opt => {
            const o = document.createElement("option");
            o.value = opt;
            o.textContent = opt === "" ? "‚Äî Sport ‚Äî" : opt;
            sel.appendChild(o);
          });
          sel.value = sess.type || "";

          const inpMin = document.createElement("input");
          inpMin.type = "number"; inpMin.min = "0";
          inpMin.placeholder = "Dauer (min)";
          inpMin.value = sess.minutes ?? "";

          const inpCal = document.createElement("input");
          inpCal.type = "number"; inpCal.min="0";
          inpCal.placeholder = "Kalorien";
          inpCal.value = sess.calories ?? "";

          const inpKm = document.createElement("input");
          inpKm.type = "number"; inpKm.min="0"; inpKm.step="0.1";
          inpKm.placeholder = "KM (nur Joggen)";
          inpKm.value = sess.km ?? "";

          const inpPace = document.createElement("input");
          inpPace.placeholder = "Pace (mm:ss / km)";
          inpPace.value = sess.pace ?? "";

          const inpNote = document.createElement("input");
          inpNote.placeholder = "Notiz";
          inpNote.value = sess.note ?? "";

          const actions = document.createElement("div");
          actions.className = "sessionActions";

          const del = document.createElement("button");
          del.className = "miniBtn danger";
          del.textContent = "L√∂schen";
          del.addEventListener("click", () => {
            weekData.sport[d.key].sessions.splice(idx, 1);
            saveWeek();
            renderSportMulti();
            renderWeekKpis();
          });
          actions.appendChild(del);

          function updateJog(){
            const isJog = sel.value === "Joggen";
            inpKm.disabled = !isJog;
            inpPace.disabled = !isJog;
            inpKm.classList.toggle("disabledLook", !isJog);
            inpPace.classList.toggle("disabledLook", !isJog);
          }

          function persist(){
            weekData.sport[d.key].sessions[idx] = {
              type: sel.value,
              minutes: inpMin.value,
              calories: inpCal.value,
              km: inpKm.value,
              pace: inpPace.value,
              note: inpNote.value
            };
            saveWeek();
            updateJog();
            renderWeekKpis();
          }

          [sel, inpMin, inpCal, inpKm, inpPace, inpNote].forEach(el => el.addEventListener("input", persist));
          sel.addEventListener("change", persist);

          updateJog();

          grid.appendChild(sel);
          grid.appendChild(inpMin);
          grid.appendChild(inpCal);
          grid.appendChild(inpKm);
          grid.appendChild(inpPace);
          grid.appendChild(inpNote);
          grid.appendChild(actions);

          card.appendChild(grid);
          sessionsWrap.appendChild(card);
        });

        block.appendChild(sessionsWrap);
      }

      sportDaysEl.appendChild(block);
    });

    saveWeek();
  }

  // ---------- reading ----------
  const readBody = document.getElementById("readBody");

  function renderReading(){
    readBody.innerHTML = "";
    DAYS.forEach(d => {
      const tr = document.createElement("tr");
      const r = weekData.reading[d.key] || (weekData.reading[d.key] = { title:"", pages:"", minutes:"" });

      const tdDay = document.createElement("td"); tdDay.textContent = d.label;

      const tdTitle = document.createElement("td");
      const inpTitle = document.createElement("input");
      inpTitle.placeholder="Buchtitel";
      inpTitle.value = r.title ?? "";
      tdTitle.appendChild(inpTitle);

      const tdPages = document.createElement("td");
      const inpPages = document.createElement("input");
      inpPages.type="number"; inpPages.min="0"; inpPages.placeholder="Seiten";
      inpPages.value = r.pages ?? "";
      tdPages.appendChild(inpPages);

      const tdMin = document.createElement("td");
      const inpMin = document.createElement("input");
      inpMin.type="number"; inpMin.min="0"; inpMin.placeholder="Minuten";
      inpMin.value = r.minutes ?? "";
      tdMin.appendChild(inpMin);

      function persist(){
        weekData.reading[d.key] = { title: inpTitle.value, pages: inpPages.value, minutes: inpMin.value };
        saveWeek();
        renderWeekKpis();
      }
      [inpTitle, inpPages, inpMin].forEach(el => el.addEventListener("input", persist));

      tr.appendChild(tdDay);
      tr.appendChild(tdTitle);
      tr.appendChild(tdPages);
      tr.appendChild(tdMin);
      readBody.appendChild(tr);
    });
    saveWeek();
  }

  // ---------- affirmations ----------
  const affBody = document.getElementById("affBody");

  function renderAffirmations(){
    affBody.innerHTML = "";
    DAYS.forEach(d => {
      const tr = document.createElement("tr");
      const a = weekData.affirm[d.key] || (weekData.affirm[d.key] = { morning:false, evening:false, note:"" });

      const tdDay = document.createElement("td"); tdDay.textContent = d.label;

      const tdM = document.createElement("td");
      const cbM = document.createElement("input");
      cbM.type="checkbox";
      cbM.checked = !!a.morning;
      tdM.appendChild(cbM);

      const tdE = document.createElement("td");
      const cbE = document.createElement("input");
      cbE.type="checkbox";
      cbE.checked = !!a.evening;
      tdE.appendChild(cbE);

      const tdN = document.createElement("td");
      const inpN = document.createElement("input");
      inpN.placeholder="Notiz";
      inpN.value = a.note ?? "";
      tdN.appendChild(inpN);

      function persist(){
        weekData.affirm[d.key] = { morning: cbM.checked, evening: cbE.checked, note: inpN.value };
        saveWeek();
        renderWeekKpis();
      }
      [cbM, cbE].forEach(el => el.addEventListener("change", persist));
      inpN.addEventListener("input", persist);

      tr.appendChild(tdDay);
      tr.appendChild(tdM);
      tr.appendChild(tdE);
      tr.appendChild(tdN);
      affBody.appendChild(tr);
    });
    saveWeek();
  }

  // ---------- weekly KPIs ----------
  const weekKpis = document.getElementById("weekKpis");

  function countThisWeek(){
    // SPORT totals from sessions
    let sportMinutes = 0;
    let sportCalories = 0;
    let jogKm = 0;
    let jogPaceSum = 0;
    let jogPaceCount = 0;

    DAYS.forEach(d => {
      const sessions = weekData.sport?.[d.key]?.sessions || [];
      sessions.forEach(s => {
        sportMinutes += Number(s.minutes || 0);
        sportCalories += Number(s.calories || 0);

        if (s.type === "Joggen"){
          const km = Number(s.km || 0);
          if (km) jogKm += km;

          const paceSec = parsePaceToSeconds(s.pace);
          if (paceSec != null){
            // average pace unweighted by distance (simple average)
            jogPaceSum += paceSec;
            jogPaceCount++;
          }
        }
      });
    });

    // Reading
    let readMinutes = 0, readPages = 0;
    DAYS.forEach(d => {
      const r = weekData.reading?.[d.key];
      if (!r) return;
      readMinutes += Number(r.minutes || 0);
      readPages += Number(r.pages || 0);
    });

    // Affirmations
    let affM = 0, affE = 0;
    DAYS.forEach(d => {
      const a = weekData.affirm?.[d.key];
      if (!a) return;
      if (a.morning) affM++;
      if (a.evening) affE++;
    });

    // Supplements: total checked items across all days
    let suppItemsChecked = 0;
    DAYS.forEach(d => {
      const items = weekData.supplements?.[d.key]?.items || {};
      Object.values(items).forEach(v => { if (v) suppItemsChecked++; });
    });

    const avgPace = jogPaceCount ? secondsToPace(jogPaceSum / jogPaceCount) : "‚Äì";

    return {
      sportMinutes, sportCalories,
      jogKm: Number(jogKm.toFixed(1)),
      avgPace,
      readMinutes, readPages,
      affM, affE,
      suppItemsChecked
    };
  }

  function kpi(num, label){
    const el = document.createElement("div");
    el.className = "kpi";
    el.innerHTML = `<div class="num">${num}</div><div class="lbl">${label}</div>`;
    return el;
  }

  function renderWeekKpis(){
    const c = countThisWeek();
    weekKpis.innerHTML = "";
    weekKpis.appendChild(kpi(`${c.sportMinutes}`, "Sport-Minuten (Woche)"));
    weekKpis.appendChild(kpi(`${c.sportCalories}`, "Sport-Kalorien (Woche)"));
    weekKpis.appendChild(kpi(`${c.jogKm}`, "Joggen-Kilometer (Woche)"));
    weekKpis.appendChild(kpi(`${c.avgPace}`, "√ò Pace (Min/km)"));
    weekKpis.appendChild(kpi(`${c.readMinutes}`, "Lesen-Minuten (Woche)"));
    weekKpis.appendChild(kpi(`${c.readPages}`, "Lesen-Seiten (Woche)"));
    weekKpis.appendChild(kpi(`${c.affM}/7`, "Affirmationen morgens"));
    weekKpis.appendChild(kpi(`${c.affE}/7`, "Affirmationen abends"));
    weekKpis.appendChild(kpi(`${c.suppItemsChecked}`, "Supplements abgehakt (Items)"));
  }

  // ---------- navigation ----------
  function rerenderAll(){
    renderWeekLabel();
    renderSupplementsDaily();
    renderSportMulti();
    renderReading();
    renderAffirmations();
    renderWeekKpis();
  }

  document.getElementById("prevWeek").addEventListener("click", () => {
    currentMonday.setDate(currentMonday.getDate() - 7);
    weekData = lsGet(weekStorageKey(), emptyWeek());
    rerenderAll();
  });
  document.getElementById("nextWeek").addEventListener("click", () => {
    currentMonday.setDate(currentMonday.getDate() + 7);
    weekData = lsGet(weekStorageKey(), emptyWeek());
    rerenderAll();
  });
  document.getElementById("todayWeek").addEventListener("click", () => {
    currentMonday = startOfWeekMonday(new Date());
    weekData = lsGet(weekStorageKey(), emptyWeek());
    rerenderAll();
  });
  document.getElementById("resetWeek").addEventListener("click", () => {
    localStorage.removeItem(weekStorageKey());
    weekData = emptyWeek();
    saveWeek();
    rerenderAll();
  });
  document.getElementById("refreshAll").addEventListener("click", renderWeekKpis);

  // init
  rerenderAll();
})();
</script>

</body>
</html>